:local ipA "9.9.9.9"
:local ipB "4.2.2.2"
:local total 40
:local delay 1
:local ok 0
:local currentIP ""

:log warning ("Iniciando teste alternado: " . $ipA . " e " . $ipB . " (" . $total . " pings totais)")

:for i from=1 to=$total do={
    
    # Alterna o IP: se o resto da divisão por 2 for 0, usa o IP B, senão usa o IP A
    :if ($i % 2 = 0) do={
        :set currentIP $ipB
    } else={
        :set currentIP $ipA
    }

    :if ([/ping $currentIP count=1] > 0) do={
        :set ok ($ok + 1)
        :log info ("Ping " . $i . " para " . $currentIP . " OK")
    } else={
        :log error ("Ping " . $i . " para " . $currentIP . " FALHOU")
    }

    :delay ($delay . "s")
}

:log warning ("Fim do teste | Total OK: " . $ok . " | Falhas: " . ($total - $ok))
